{"remainingRequest":"/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/babel-loader/lib/index.js!/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anastasiaspileva/WebHW/lesson11/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anastasiaspileva/WebHW/lesson11/frontend/src/App.vue","mtime":1640356962783},{"path":"/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1640344604407},{"path":"/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/babel-loader/lib/index.js","mtime":1640344604613},{"path":"/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1640344604407},{"path":"/Users/anastasiaspileva/WebHW/lesson11/frontend/node_modules/vue-loader/lib/index.js","mtime":1640344604687}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBIZWFkZXIgZnJvbSAiLi9jb21wb25lbnRzL0hlYWRlciI7CmltcG9ydCBNaWRkbGUgZnJvbSAiLi9jb21wb25lbnRzL01pZGRsZSI7CmltcG9ydCBGb290ZXIgZnJvbSAiLi9jb21wb25lbnRzL0Zvb3RlciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjb21wb25lbnRzOiB7CiAgICBGb290ZXI6IEZvb3RlciwKICAgIE1pZGRsZTogTWlkZGxlLAogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiBudWxsLAogICAgICB1c2VyczogW10sCiAgICAgIHBvc3RzOiBbXQogICAgfTsKICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSAmJiAhdGhpcy51c2VyKSB7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uSnd0IiwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpKTsKICAgIH0KCiAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzLnBvc3RzID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy51c2VycyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy4kcm9vdC4kb24oIm9uRW50ZXIiLCBmdW5jdGlvbiAobG9naW4sIHBhc3N3b3JkKSB7CiAgICAgIGlmIChwYXNzd29yZCA9PT0gIiIpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uRW50ZXJWYWxpZGF0aW9uRXJyb3IiLCAiUGFzc3dvcmQgaXMgcmVxdWlyZWQiKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBheGlvcy5wb3N0KCIvYXBpLzEvand0IiwgewogICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25Kd3QiLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25SZWdpc3RlciIsIGZ1bmN0aW9uIChsb2dpbiwgbmFtZSwgcGFzc3dvcmQpIHsKICAgICAgbG9naW4gPSBsb2dpbi50cmltKCk7CiAgICAgIG5hbWUgPSBuYW1lLnRyaW0oKTsKCiAgICAgIGlmIChwYXNzd29yZCA9PT0gIiIpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCAiUGFzc3dvcmQgaXMgcmVxdWlyZWQiKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobG9naW4ubGVuZ3RoIDwgMyB8fCBsb2dpbi5sZW5ndGggPiAxNikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsICJMb2dpbiBzaG91bGQgY29udGFpbiBmcm9tIDMgdG8gMTYgY2hhcmFjdGVycyIpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghbG9naW4ubWF0Y2goL15bYS16XSskLykpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCAiTG9naW4gc2hvdWxkIGNvbnRhaW4gb25seSBsb3dlcmNhc2UgbGF0aW4gbGV0dGVycyIpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCB8fCBuYW1lLmxlbmd0aCA+IDMyKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIk5hbWUgc2hvdWxkIGNvbnRhaW4gZnJvbSAxIHRvIDMyIGNoYXJhY3RlcnMiKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBheGlvcy5wb3N0KCIvYXBpLzEvdXNlcnMiLCB7CiAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF8pIHsKICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS91c2VycyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczIudXNlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uRW50ZXIiLCBsb2dpbiwgcGFzc3dvcmQpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uSnd0IiwgZnVuY3Rpb24gKGp3dCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0Iiwgand0KTsKICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMvYXV0aCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGp3dDogand0CiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi51c2VyID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCAiSW5kZXgiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczIuJHJvb3QuJGVtaXQoIm9uTG9nb3V0Iik7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25Mb2dvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJqd3QiKTsKICAgICAgX3RoaXMyLnVzZXIgPSBudWxsOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\" :users=\"users\"/>\n    <Footer/>\n  </div>\n</template>\n\n<script>\nimport Header from \"./components/Header\";\nimport Middle from \"./components/Middle\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\"\n\nexport default {\n  name: 'App',\n  components: {\n    Footer,\n    Middle,\n    Header\n  },\n  data: function () {\n    return {\n      user: null,\n      users: [],\n      posts: []\n    }\n  },\n  beforeMount() {\n    if (localStorage.getItem(\"jwt\") && !this.user) {\n      this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"));\n    }\n\n    axios.get(\"/api/1/posts\").then(response => {\n      this.posts = response.data;\n    });\n\n    axios.get(\"/api/1/users\").then(response => {\n      this.users = response.data;\n    });\n  },\n  beforeCreate: function () {\n    this.$root.$on(\"onEnter\", (login, password) => {\n      if (password === \"\") {\n        this.$root.$emit(\"onEnterValidationError\", \"Password is required\");\n        return;\n      }\n\n      axios.post(\"/api/1/jwt\", {\n        login, password\n      }).then(response => {\n        localStorage.setItem(\"jwt\", response.data);\n        this.$root.$emit(\"onJwt\", response.data);\n      }).catch(error => {\n        this.$root.$emit(\"onEnterValidationError\", error.response.data);\n      });\n    });\n\n    this.$root.$on(\"onRegister\", (login, name, password) => {\n      login = login.trim()\n      name = name.trim()\n      if (password === \"\") {\n        this.$root.$emit(\"onRegisterValidationError\", \"Password is required\");\n        return;\n      }\n\n      if (login.length < 3 || login.length > 16) {\n        this.$root.$emit(\"onRegisterValidationError\", \"Login should contain from 3 to 16 characters\");\n        return;\n      }\n      if (!login.match(/^[a-z]+$/)) {\n        this.$root.$emit(\"onRegisterValidationError\", \"Login should contain only lowercase latin letters\");\n        return;\n      }\n      if (name.length === 0 || name.length > 32) {\n        this.$root.$emit(\"onRegisterValidationError\", \"Name should contain from 1 to 32 characters\");\n        return;\n      }\n\n      axios.post(\"/api/1/users\", {\n        login, name, password\n      }).catch(error => {\n        this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n        // eslint-disable-next-line no-unused-vars\n      }).then(_ => {\n        axios.get(\"/api/1/users\").then(response => {\n          this.users = response.data;\n        });\n        this.$root.$emit(\"onEnter\", login, password);\n      })\n    });\n\n    this.$root.$on(\"onJwt\", (jwt) => {\n      localStorage.setItem(\"jwt\", jwt);\n\n      axios.get(\"/api/1/users/auth\", {\n        params: {\n          jwt\n        }\n      }).then(response => {\n        this.user = response.data;\n        this.$root.$emit(\"onChangePage\", \"Index\");\n      }).catch(() => this.$root.$emit(\"onLogout\"))\n    });\n\n    this.$root.$on(\"onLogout\", () => {\n      localStorage.removeItem(\"jwt\");\n      this.user = null;\n    });\n\n  }\n}\n</script>\n\n<style>\n#app {\n\n}\n</style>\n"],"sourceRoot":"src"}]}